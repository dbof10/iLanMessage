{"ast":null,"code":"import{createSelector,createSlice}from'@reduxjs/toolkit';const initialState={messages:[],loading:false,error:null};export const chatSlice=createSlice({name:'chat',initialState,reducers:{setMessages(state,action){state.messages=action.payload;},addMessage(state,action){const exists=state.messages.some(m=>m.timestamp===action.payload.timestamp&&m.sender===action.payload.sender&&m.type===action.payload.type&&(m.content===action.payload.content||m.downloadURL===action.payload.downloadURL));if(!exists){state.messages.push(action.payload);}},setLoading(state,action){state.loading=action.payload;},setError(state,action){state.error=action.payload;}}});export const{setMessages,addMessage,setLoading,setError}=chatSlice.actions;const selectChat=state=>state.chat;export const selectMessages=createSelector([selectChat],chat=>chat.messages);","map":{"version":3,"names":["createSelector","createSlice","initialState","messages","loading","error","chatSlice","name","reducers","setMessages","state","action","payload","addMessage","exists","some","m","timestamp","sender","type","content","downloadURL","push","setLoading","setError","actions","selectChat","chat","selectMessages"],"sources":["/Users/229240/Downloads/iLanMessage/src/chat/chatSlice.ts"],"sourcesContent":["import {createSelector, createSlice, PayloadAction} from '@reduxjs/toolkit';\nimport {RootState} from \"../store\";\n\nexport interface Message {\n    type: 'text' | 'file';\n    content?: string;\n    filename?: string;\n    downloadURL?: string;\n    sender: string;\n    timestamp: number;\n}\n\ninterface ChatState {\n    messages: Message[];\n    loading: boolean;\n    error: string | null;\n}\n\nconst initialState: ChatState = {\n    messages: [],\n    loading: false,\n    error: null,\n};\n\nexport const chatSlice = createSlice({\n    name: 'chat',\n    initialState,\n    reducers: {\n        setMessages(state, action: PayloadAction<Message[]>) {\n            state.messages = action.payload;\n        },\n        addMessage(state, action: PayloadAction<Message>) {\n            const exists = state.messages.some(\n                (m) =>\n                    m.timestamp === action.payload.timestamp &&\n                    m.sender === action.payload.sender &&\n                    m.type === action.payload.type &&\n                    (m.content === action.payload.content || m.downloadURL === action.payload.downloadURL)\n            );\n            if (!exists) {\n                state.messages.push(action.payload);\n            }\n        },\n        setLoading(state, action: PayloadAction<boolean>) {\n            state.loading = action.payload;\n        },\n        setError(state, action: PayloadAction<string | null>) {\n            state.error = action.payload;\n        },\n    },\n});\n\nexport const {setMessages, addMessage, setLoading, setError} = chatSlice.actions;\n\nconst selectChat = (state: RootState) => state.chat;\n\nexport const selectMessages = createSelector(\n    [selectChat],\n    (chat) => chat.messages\n);\n"],"mappings":"AAAA,OAAQA,cAAc,CAAEC,WAAW,KAAsB,kBAAkB,CAkB3E,KAAM,CAAAC,YAAuB,CAAG,CAC5BC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,IACX,CAAC,CAED,MAAO,MAAM,CAAAC,SAAS,CAAGL,WAAW,CAAC,CACjCM,IAAI,CAAE,MAAM,CACZL,YAAY,CACZM,QAAQ,CAAE,CACNC,WAAWA,CAACC,KAAK,CAAEC,MAAgC,CAAE,CACjDD,KAAK,CAACP,QAAQ,CAAGQ,MAAM,CAACC,OAAO,CACnC,CAAC,CACDC,UAAUA,CAACH,KAAK,CAAEC,MAA8B,CAAE,CAC9C,KAAM,CAAAG,MAAM,CAAGJ,KAAK,CAACP,QAAQ,CAACY,IAAI,CAC7BC,CAAC,EACEA,CAAC,CAACC,SAAS,GAAKN,MAAM,CAACC,OAAO,CAACK,SAAS,EACxCD,CAAC,CAACE,MAAM,GAAKP,MAAM,CAACC,OAAO,CAACM,MAAM,EAClCF,CAAC,CAACG,IAAI,GAAKR,MAAM,CAACC,OAAO,CAACO,IAAI,GAC7BH,CAAC,CAACI,OAAO,GAAKT,MAAM,CAACC,OAAO,CAACQ,OAAO,EAAIJ,CAAC,CAACK,WAAW,GAAKV,MAAM,CAACC,OAAO,CAACS,WAAW,CAC7F,CAAC,CACD,GAAI,CAACP,MAAM,CAAE,CACTJ,KAAK,CAACP,QAAQ,CAACmB,IAAI,CAACX,MAAM,CAACC,OAAO,CAAC,CACvC,CACJ,CAAC,CACDW,UAAUA,CAACb,KAAK,CAAEC,MAA8B,CAAE,CAC9CD,KAAK,CAACN,OAAO,CAAGO,MAAM,CAACC,OAAO,CAClC,CAAC,CACDY,QAAQA,CAACd,KAAK,CAAEC,MAAoC,CAAE,CAClDD,KAAK,CAACL,KAAK,CAAGM,MAAM,CAACC,OAAO,CAChC,CACJ,CACJ,CAAC,CAAC,CAEF,MAAO,MAAM,CAACH,WAAW,CAAEI,UAAU,CAAEU,UAAU,CAAEC,QAAQ,CAAC,CAAGlB,SAAS,CAACmB,OAAO,CAEhF,KAAM,CAAAC,UAAU,CAAIhB,KAAgB,EAAKA,KAAK,CAACiB,IAAI,CAEnD,MAAO,MAAM,CAAAC,cAAc,CAAG5B,cAAc,CACxC,CAAC0B,UAAU,CAAC,CACXC,IAAI,EAAKA,IAAI,CAACxB,QACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}